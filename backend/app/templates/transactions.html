{% extends "base.html" %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <a class="btn btn-outline-primary" href="/transactions?month={{ prev_month }}">« Prev</a>
    <span class="mx-3 h5">{{ month_label }}</span>
    <a class="btn btn-outline-primary" href="/transactions?month={{ next_month }}">Next »</a>
  </div>
  <div>
    <a class="btn btn-outline-secondary" href="/?month={{ month }}">Back to Dashboard</a>
  </div>
</div>

<div class="mb-3">
  <div class="d-flex justify-content-between">
    <span class="text-success">Income: {{ '%.2f'|format(income_total) }}</span>
    <span class="text-danger">Expenses: {{ '%.2f'|format(expense_total) }}</span>
  </div>
  {% set total = (income_total + expense_total) if (income_total + expense_total) > 0 else 1 %}
  <div class="progress" style="height: 24px;">
    <div class="progress-bar bg-success" role="progressbar" style="width: {{ (income_total / total * 100) | round(2) }}%"></div>
    <div class="progress-bar bg-danger" role="progressbar" style="width: {{ (expense_total / total * 100) | round(2) }}%"></div>
  </div>
</div>

<table class="table table-sm table-striped">
  <thead>
    <tr>
      <th>Date</th>
      <th>Category</th>
      <th>Description</th>
      <th class="text-end">Amount</th>
    </tr>
  </thead>
  <tbody>
    {% for tx in transactions %}
    <tr>
      <td>{{ tx.date }}</td>
      <td>{{ tx.category }}</td>
      <td>{{ tx.description or '' }}</td>
      <td class="text-end {% if tx.type == 'income' %}text-success{% else %}text-danger{% endif %}">{{ '%.2f'|format(tx.amount) }}</td>
    </tr>
    {% else %}
    <tr><td colspan="4" class="text-muted">No transactions</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
